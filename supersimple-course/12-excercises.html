<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App</title>
</head>
<body>
  

  <button class = "js-start" >Start</button>
  <button class = "js-cart" >Add to Cart</button>
  <p class = "js-cart-text">

  </p>
  <script>

    let messagesNumber = 0;

    document.querySelector('.js-start').addEventListener('click', pressButton);
    document.querySelector('.js-cart').addEventListener('click', addToCart);
    
    function pressButton(){
      const buttonText = document.querySelector('.js-start')
      buttonText.innerHTML = 'Loading...'
    setTimeout(( startButton = () => {
      buttonText.innerHTML = 'Finished'
    }), 2000);
    messagesNumber += Math.floor((Math.random())*10)
    }

      let idTimeOut;

      function addToCart(){
        const cartText = document.querySelector('.js-cart-text');
        cartText.innerHTML = 'Added to cart';

        clearTimeout(idTimeOut);

        //qui anche se sto solo dichiarando la variabile con la funzione la runna lo stesso
        idTimeOut = setTimeout((changeText = () => {
          cartText.innerHTML = '';
        }),2000)
      }


     setInterval((function(){
       if (!(document.title === `App`)){
        document.title = `App`
       } else {
        document.title = `(${messagesNumber}) new Messages`
       }}),1000)

      
  </script>
</body>
</html>